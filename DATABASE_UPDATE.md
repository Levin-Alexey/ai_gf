# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏

## üö® –í–ê–ñ–ù–û! –í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–∏—Å—Ç–µ–º—ã!

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–π PostgreSQL –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```bash
psql -h 72.56.69.63 -U admingf -d gfdb
```

### 2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```sql
\i update_db_memory.sql
```

–ò–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `update_db_memory.sql` –≤ psql.

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü:

```sql
\dt user_memories
\dt user_emotions  
\dt user_relationships
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ enum —Ç–∏–ø—ã:

```sql
\dT memory_type
\dT memory_importance
```

## üìã –ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è:

### **–ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- ‚úÖ `user_memories` - –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å
- ‚úÖ `user_emotions` - —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ `user_relationships` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö

### **–ù–æ–≤—ã–µ enum —Ç–∏–ø—ã:**
- ‚úÖ `memory_type` - —Ç–∏–ø—ã –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
- ‚úÖ `memory_importance` - —É—Ä–æ–≤–Ω–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏

### **–ò–Ω–¥–µ–∫—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ GIN –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ —Ç–µ–≥–æ–≤
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (–µ—Å–ª–∏ psql –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω):

### –ß–µ—Ä–µ–∑ Python —Å–∫—Ä–∏–ø—Ç:

```python
import asyncio
import asyncpg
from dotenv import load_dotenv
import os

load_dotenv()

async def update_database():
    # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    conn = await asyncpg.connect(os.getenv('DATABASE_URL'))
    
    # –ß—Ç–µ–Ω–∏–µ SQL —Ñ–∞–π–ª–∞
    with open('update_db_memory.sql', 'r', encoding='utf-8') as f:
        sql_script = f.read()
    
    # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞
    await conn.execute(sql_script)
    
    print("–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!")
    await conn.close()

# –ó–∞–ø—É—Å–∫
asyncio.run(update_database())
```

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø:

1. **–°–¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admingf
3. **–£–±–µ–¥–∏—Ç–µ—Å—å**, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö gfdb —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
4. **–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∏—Å—Ç–µ–º—É

## üöÄ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   python main.py
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–æ—Ä–∫–µ—Ä:
   ```bash
   python run_worker.py
   ```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö ChromaDB
- ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç –º–æ–¥–µ–ª—å –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- ‚úÖ –ù–∞—á–Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ PostgreSQL
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –≤ ChromaDB
