#!/bin/bash

echo "üîç –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ API –ø—Ä–æ–±–ª–µ–º"
echo "================================="

cd /root/ai_gf
source venv/bin/activate

echo ""
echo "1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é API..."
python debug_api_key.py

echo ""
echo "2Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–µ–º API —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π..."
python test_openrouter_detailed.py

echo ""
echo "3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –≤–æ—Ä–∫–µ—Ä–∞..."
sudo systemctl status ai-gf-worker --no-pager

echo ""
echo "4Ô∏è‚É£ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ –≤–æ—Ä–∫–µ—Ä–∞..."
journalctl -u ai-gf-worker --since "5 minutes ago" --no-pager

echo ""
echo "5Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∞–π–ª .env..."
echo "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ .env —Ñ–∞–π–ª–∞ (—Å–∫—Ä—ã—Ç—ã–µ –∫–ª—é—á–∏):"
grep -E "(API_KEY|OPENROUTER|LLM)" .env | sed 's/=.*/=***–°–ö–†–´–¢–û***/'

echo ""
echo "================================="
echo "üéØ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo ""
echo "üí° –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è:"
echo "   1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ openrouter.ai"
echo "   2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á"
echo "   3. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ .env —Ñ–∞–π–ª–∞"
echo "   4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API"
