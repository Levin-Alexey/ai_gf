# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –¥–ª—è OpenRouter API

## üîç –ü—Ä–æ–±–ª–µ–º–∞
OpenRouter —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã:
- `HTTP-Referer` - URL —Å–∞–π—Ç–∞ –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ openrouter.ai
- `X-Title` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–∞–π—Ç–∞ –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ openrouter.ai

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **llm_worker.py**
–î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:
```python
headers = {
    "Authorization": f"Bearer {LLM_API_KEY}",
    "Content-Type": "application/json",
    "HTTP-Referer": "https://ai-gf-bot.com",  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è OpenRouter
    "X-Title": "AI Girlfriend Bot"  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è OpenRouter
}
```

### 2. **test_llm_api.py**
–û–±–Ω–æ–≤–ª–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –ù–∞ VDS:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–æ—Ä–∫–µ—Ä
sudo systemctl stop ai-gf-worker

# –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª—ã llm_worker.py –∏ test_llm_api.py
# (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ git pull –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–æ—Ä–∫–µ—Ä
sudo systemctl start ai-gf-worker

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status ai-gf-worker
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ .env:
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ .env —Ñ–∞–π–ª–µ –µ—Å—Ç—å:
cat /root/ai_gf/.env | grep -E "(OPENROUTER_API_KEY|LLM_API_URL)"

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
OPENROUTER_API_KEY=sk-or-–≤–∞—à_–∫–ª—é—á
LLM_API_URL=https://openrouter.ai/api/v1/chat/completions
LLM_MODEL=openai/gpt-3.5-turbo
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç API:
```bash
cd /root/ai_gf
source venv/bin/activate
python test_llm_api.py
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Ä–∫–µ—Ä–∞:
```bash
sudo systemctl status ai-gf-worker
journalctl -u ai-gf-worker -f
```

### 3. –¢–µ—Å—Ç —Å –±–æ—Ç–æ–º:
–ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
INFO:__main__:ü§ñ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ LLM API –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 525944420
INFO:__main__:‚úÖ –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç LLM –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 525944420
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤:
- ‚úÖ OpenRouter API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –í–æ—Ä–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã –æ—Ç LLM
- ‚úÖ –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –û—à–∏–±–∫–∞ 401 –∏—Å—á–µ–∑–∞–µ—Ç

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏:
–í —Ñ–∞–π–ª–µ `llm_worker.py` –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ 380-381:
```python
"HTTP-Referer": "https://ai-gf-bot.com",  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
"X-Title": "AI Girlfriend Bot"  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ OpenRouter:
- `openai/gpt-3.5-turbo` - –±—ã—Å—Ç—Ä–∞—è –∏ –¥–µ—à–µ–≤–∞—è
- `google/gemini-2.0-flash-exp` - —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- `anthropic/claude-3-haiku` - –æ—Ç–ª–∏—á–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ
- `meta-llama/llama-3.1-8b-instruct:free` - –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å

## üéØ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å OpenRouter API –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏!
